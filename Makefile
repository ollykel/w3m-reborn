BIN=w3m
TEST_DIR=tests

ifeq ($(LD),$(CPP))
%.out: %.o
	$(LD) -o $@ $<
else
%.out: %.o
	$(LD) $(LDFLAGS) -o $@ $<
endif

# === ALL =================================================================
#
# =========================================================================
all: $(BIN) tests

# === CLEAN ===============================================================
#
# =========================================================================
clean:
	$(RM) $(BIN)
	$(RM) *.o
	$(RM) tests/*.o
	$(RM) tests/*.out

# === MAIN BINARY =========================================================
#
# =========================================================================
ifeq ($(LD),$(CPP))
$(BIN): main.o
	$(LD) -o $@ $<
else
$(BIN): main.o
	$(LD) $(LDFLAGS) -o $@ $<
endif

main.o: main.cpp

# === TESTS ===============================================================
#
# =========================================================================
TEST_TRIVIAL=$(TEST_DIR)/test_trivial

tests: $(TEST_TRIVIAL).out

$(TEST_TRIVIAL).out: $(TEST_TRIVIAL).o

$(TEST_TRIVIAL).o: $(TEST_TRIVIAL).cpp
